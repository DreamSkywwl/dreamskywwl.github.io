<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>本地存储分类导航主页（磨砂背景版）</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 全局样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
        }

        /* 背景图 + 磨砂效果核心样式 */
        body {
            background: url('https://img1.baidu.com/it/u=1884722404,131469563&fm=253&app=138&f=JPEG?w=889&h=500') no-repeat center center fixed;
            background-size: cover;
            color: #333;
            line-height: 1.6;
            /* 防止背景图遮挡内容 */
            position: relative;
            min-height: 100vh;
        }

        /* 磨砂遮罩层 - 核心毛玻璃效果 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* 磨砂效果：backdrop-filter 是核心，配合半透明背景 */
            backdrop-filter: blur(1px);
            -webkit-backdrop-filter: blur(1px); /* 兼容webkit内核浏览器 */
            background-color: rgba(255, 255, 255, 0.3); /* 白色半透明叠加，提升可读性 */
            z-index: -1; /* 放在内容下方 */
        }

        /* 顶部导航栏 - 粘性定位 + 增强磨砂效果 */
        .navbar {
            background-color: rgba(255, 255, 255, 0.85); /* 半透明白色 */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .navbar-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #165dff;
            display: flex;
            align-items: center;
            gap: 8px;
            /* 文字阴影提升辨识度 */
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* 搜索框样式 - 增强磨砂 */
        .search-box {
            position: relative;
            width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: 1px solid rgba(229, 231, 235, 0.8);
            border-radius: 6px;
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
            /* 搜索框磨砂效果 */
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .search-input:focus {
            border-color: #165dff;
            box-shadow: 0 0 0 2px rgba(22, 93, 255, 0.1), 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }

        /* 主内容容器 */
        .main-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            /* 确保内容在磨砂层上方 */
            position: relative;
            z-index: 1;
        }

        /* 分类标签栏 - 支持横向滚动 + 磨砂 */
        .category-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin-bottom: 20px;
            scrollbar-width: none; /* 隐藏Firefox滚动条 */
        }

        .category-tabs::-webkit-scrollbar {
            display: none; /* 隐藏Chrome滚动条 */
        }

        .category-tab {
            padding: 8px 20px;
            /* 标签磨砂效果 */
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(229, 231, 235, 0.8);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .category-tab.active {
            background-color: #165dff;
            color: #fff;
            border-color: #165dff;
            box-shadow: 0 4px 12px rgba(22, 93, 255, 0.2);
        }

        .category-tab:hover:not(.active) {
            border-color: #165dff;
            color: #165dff;
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 3px 9px rgba(0, 0, 0, 0.08);
        }

        /* 分类内容区域 */
        .nav-categories {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .category-section {
            /* 分类区块磨砂效果 */
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px; /* 增加圆角更美观 */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border: 1px solid rgba(229, 231, 235, 0.5);
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .category-title i {
            color: #165dff;
            font-size: 20px;
        }

        /* 链接网格布局 */
        .link-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }

        .link-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 8px;
            /* 链接卡片磨砂效果 */
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            border: 1px solid rgba(229, 231, 235, 0.6);
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .link-card:hover {
            background-color: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(22, 93, 255, 0.15);
            border-color: rgba(22, 93, 255, 0.3);
        }

        .link-icon {
            width: 48px;
            height: 48px;
            background-color: rgba(232, 244, 255, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            color: #165dff;
            font-size: 24px;
            box-shadow: 0 3px 9px rgba(22, 93, 255, 0.1);
        }

        .link-name {
            font-size: 14px;
            color: #333;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        /* 空状态样式 - 增强磨砂 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
            /* 空状态磨砂效果 */
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            color: #9ca3af;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .empty-state h3 {
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        /* 提示消息 - 增强磨砂 */
        .toast {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            z-index: 9999;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-success {
            background-color: rgba(16, 185, 129, 0.9);
        }

        /* 响应式适配 */
        @media (max-width: 768px) {
            .navbar-container {
                flex-direction: column;
                height: auto;
                padding: 15px 20px;
                gap: 15px;
            }

            .search-box {
                width: 100%;
            }

            .link-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .link-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            /* 移动端降低磨砂模糊度，提升性能 */
            body::before {
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
            }

            .navbar, .category-section, .empty-state {
                backdrop-filter: blur(6px);
                -webkit-backdrop-filter: blur(6px);
            }
        }

        @media (max-width: 480px) {
            .link-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="logo">
                <i class="fas fa-compass"></i>
                <span>本地存储导航主页</span>
            </div>
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="global-search" placeholder="搜索所有导航链接...">
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="main-container">
        <!-- 分类标签栏（动态生成） -->
        <div class="category-tabs" id="category-tabs"></div>

        <!-- 导航分类区域（动态生成） -->
        <div class="nav-categories" id="nav-content"></div>

        <!-- 空状态（无数据/搜索无结果） -->
        <div class="empty-state" id="empty-state" style="display: none;">
            <i class="fas fa-folder-open"></i>
            <h3>暂无导航数据</h3>
            <p>本地存储中未找到导航数据，已加载默认示例数据</p>
        </div>
        <div class="empty-state" id="search-empty-state" style="display: none;">
            <i class="fas fa-search"></i>
            <h3>未找到相关链接</h3>
            <p>请尝试使用其他关键词搜索</p>
        </div>
    </main>

    <!-- 提示消息 -->
    <div class="toast" id="toast"></div>

    <script>
        // ===================== 核心配置与数据管理 =====================
        // 本地存储键名
        const STORAGE_KEY = 'customNavData';
        
        // 默认导航数据（无本地数据时使用）
        const DEFAULT_DATA = {
            categories: [
                { key: 'search', name: '搜索引擎', icon: 'fas fa-search' },
                { key: 'social', name: '社交娱乐', icon: 'fas fa-users' },
                { key: 'work', name: '办公工具', icon: 'fas fa-briefcase' },
                { key: 'dev', name: '开发工具', icon: 'fas fa-code' },
                { key: 'study', name: '学习资源', icon: 'fas fa-graduation-cap' },
                { key: 'life', name: '生活服务', icon: 'fas fa-home' }
            ],
            links: [
                { id: 1, name: '百度', url: 'https://www.baidu.com', category: 'search', icon: 'fas fa-search' },
                { id: 2, name: 'Google', url: 'https://www.google.com', category: 'search', icon: 'fab fa-google' },
                { id: 3, name: '必应', url: 'https://cn.bing.com', category: 'search', icon: 'fab fa-bing' },
                { id: 4, name: '微信', url: 'https://www.weixin.qq.com', category: 'social', icon: 'fab fa-weixin' },
                { id: 5, name: 'QQ', url: 'https://www.qq.com', category: 'social', icon: 'fab fa-qq' },
                { id: 6, name: '哔哩哔哩', url: 'https://www.bilibili.com', category: 'social', icon: 'fab fa-bilibili' },
                { id: 7, name: '百度网盘', url: 'https://pan.baidu.com', category: 'work', icon: 'fas fa-cloud' },
                { id: 8, name: '腾讯文档', url: 'https://docs.qq.com', category: 'work', icon: 'fas fa-file-alt' },
                { id: 9, name: 'GitHub', url: 'https://github.com', category: 'dev', icon: 'fab fa-github' },
                { id: 10, name: 'MDN文档', url: 'https://developer.mozilla.org', category: 'dev', icon: 'fas fa-book' },
                { id: 11, name: '知乎', url: 'https://www.zhihu.com', category: 'study', icon: 'fas fa-comment-dots' },
                { id: 12, name: '力扣', url: 'https://leetcode.cn', category: 'study', icon: 'fas fa-laptop-code' },
                { id: 13, name: '淘宝', url: 'https://www.taobao.com', category: 'life', icon: 'fas fa-shopping-cart' },
                { id: 14, name: '美团', url: 'https://www.meituan.com', category: 'life', icon: 'fas fa-utensils' }
            ]
        };

        // 全局数据对象（从localStorage读取）
        let navData = {};

        // DOM元素获取
        const categoryTabs = document.getElementById('category-tabs');
        const navContent = document.getElementById('nav-content');
        const globalSearch = document.getElementById('global-search');
        const emptyState = document.getElementById('empty-state');
        const searchEmptyState = document.getElementById('search-empty-state');
        const toast = document.getElementById('toast');

        // ===================== 本地存储操作 =====================
        /**
         * 从localStorage读取导航数据
         * @returns {Object} 导航数据对象
         */
        function loadFromLocalStorage() {
            try {
                const savedData = localStorage.getItem(STORAGE_KEY);
                if (savedData) {
                    // 解析本地存储的数据
                    navData = JSON.parse(savedData);
                    showToast('成功加载本地导航数据', 'success');
                } else {
                    // 无本地数据，使用默认值并保存
                    navData = JSON.parse(JSON.stringify(DEFAULT_DATA));
                    saveToLocalStorage();
                    showToast('未找到本地数据，加载默认示例', 'success');
                }
                // 验证数据结构完整性
                validateDataStructure();
            } catch (error) {
                console.error('读取本地存储失败:', error);
                // 读取失败时使用默认数据
                navData = JSON.parse(JSON.stringify(DEFAULT_DATA));
                saveToLocalStorage();
                showToast('本地数据损坏，已恢复默认配置', 'success');
            }
        }

        /**
         * 将导航数据保存到localStorage
         */
        function saveToLocalStorage() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(navData));
            } catch (error) {
                console.error('保存到本地存储失败:', error);
                showToast('数据保存失败，请检查存储权限', 'error');
            }
        }

        /**
         * 验证数据结构完整性（防止本地数据被篡改）
         */
        function validateDataStructure() {
            if (!navData.categories || !Array.isArray(navData.categories)) {
                navData.categories = DEFAULT_DATA.categories;
            }
            if (!navData.links || !Array.isArray(navData.links)) {
                navData.links = DEFAULT_DATA.links;
            }
            // 确保每个分类和链接都有必要的字段
            navData.categories = navData.categories.filter(c => c.key && c.name);
            navData.links = navData.links.filter(l => l.id && l.name && l.url && l.category);
        }

        // ===================== 页面渲染 =====================
        /**
         * 初始化页面：读取数据 → 渲染分类标签 → 渲染内容 → 绑定事件
         */
        function initPage() {
            // 1. 读取本地存储数据
            loadFromLocalStorage();
            
            // 2. 渲染分类标签栏
            renderCategoryTabs();
            
            // 3. 渲染导航内容（默认显示全部）
            renderNavContent('all');
            
            // 4. 绑定所有交互事件
            bindEvents();
            
            // 5. 检查空状态
            checkEmptyState();
        }

        /**
         * 渲染分类标签栏（包含"全部"标签）
         */
        function renderCategoryTabs() {
            // 清空原有内容
            categoryTabs.innerHTML = '';
            
            // 添加"全部"标签（默认激活）
            const allTab = document.createElement('div');
            allTab.className = 'category-tab active';
            allTab.dataset.category = 'all';
            allTab.textContent = '全部';
            categoryTabs.appendChild(allTab);
            
            // 动态添加自定义分类标签
            navData.categories.forEach(category => {
                const tab = document.createElement('div');
                tab.className = 'category-tab';
                tab.dataset.category = category.key;
                tab.textContent = category.name;
                categoryTabs.appendChild(tab);
            });
        }

        /**
         * 渲染导航内容
         * @param {string} activeCategory 激活的分类key（all表示全部）
         * @param {Array} filteredLinks 可选：筛选后的链接列表（搜索时使用）
         */
        function renderNavContent(activeCategory = 'all', filteredLinks = null) {
            // 清空内容区域
            navContent.innerHTML = '';
            
            // 确定要渲染的链接列表
            const linksToRender = filteredLinks || (
                activeCategory === 'all' 
                    ? navData.links 
                    : navData.links.filter(link => link.category === activeCategory)
            );

            // 按分类分组链接
            const linksByCategory = {};
            navData.categories.forEach(category => {
                linksByCategory[category.key] = linksToRender.filter(link => link.category === category.key);
            });

            // 渲染每个分类区域
            navData.categories.forEach(category => {
                const categoryLinks = linksByCategory[category.key];
                // 非"全部"分类且无对应链接时，跳过渲染
                if (activeCategory !== 'all' && categoryLinks.length === 0) return;

                // 创建分类区块
                const section = document.createElement('div');
                section.className = 'category-section';
                section.dataset.category = category.key;

                // 分类标题
                section.innerHTML = `
                    <div class="category-title">
                        <i class="${category.icon || 'fas fa-folder'}"></i>
                        ${category.name}
                    </div>
                    <div class="link-grid" id="link-grid-${category.key}"></div>
                `;
                navContent.appendChild(section);

                // 渲染分类下的链接卡片
                const linkGrid = section.querySelector(`#link-grid-${category.key}`);
                if (categoryLinks.length === 0) {
                    // 无链接时显示提示
                    linkGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 20px; color: #9ca3af;">
                            该分类暂无链接
                        </div>
                    `;
                } else {
                    // 渲染每个链接卡片
                    categoryLinks.forEach(link => {
                        const linkCard = document.createElement('div');
                        linkCard.className = 'link-card';
                        linkCard.dataset.id = link.id;
                        linkCard.innerHTML = `
                            <div class="link-icon"><i class="${link.icon || 'fas fa-link'}"></i></div>
                            <div class="link-name">${link.name}</div>
                        `;
                        linkGrid.appendChild(linkCard);

                        // 绑定链接点击事件（新窗口打开）
                        linkCard.addEventListener('click', () => {
                            window.open(link.url, '_blank');
                            showToast(`正在前往：${link.name}`, 'success');
                        });
                    });
                }
            });
        }

        // ===================== 交互事件绑定 =====================
        /**
         * 绑定所有页面交互事件
         */
        function bindEvents() {
            // 1. 分类标签点击事件
            bindCategoryTabClick();
            
            // 2. 全局搜索事件（实时筛选）
            bindGlobalSearch();
        }

        /**
         * 绑定分类标签点击事件
         */
        function bindCategoryTabClick() {
            const tabs = categoryTabs.querySelectorAll('.category-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 切换激活状态
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 获取当前分类并渲染对应内容
                    const category = this.dataset.category;
                    renderNavContent(category);
                    
                    // 隐藏搜索空状态
                    searchEmptyState.style.display = 'none';
                    navContent.style.display = 'flex';
                    emptyState.style.display = 'none';
                });
            });
        }

        /**
         * 绑定全局搜索事件
         */
        function bindGlobalSearch() {
            globalSearch.addEventListener('input', function() {
                const keyword = this.value.trim().toLowerCase();
                
                if (!keyword) {
                    // 无关键词时恢复当前激活分类的显示
                    const activeTab = categoryTabs.querySelector('.category-tab.active');
                    renderNavContent(activeTab.dataset.category);
                    searchEmptyState.style.display = 'none';
                    emptyState.style.display = 'none';
                    return;
                }

                // 根据关键词筛选链接（名称/URL模糊匹配）
                const matchedLinks = navData.links.filter(link => 
                    link.name.toLowerCase().includes(keyword) || 
                    link.url.toLowerCase().includes(keyword)
                );

                if (matchedLinks.length === 0) {
                    // 无匹配结果时显示搜索空状态
                    navContent.style.display = 'none';
                    emptyState.style.display = 'none';
                    searchEmptyState.style.display = 'block';
                } else {
                    // 渲染匹配的链接
                    renderNavContent('all', matchedLinks);
                    searchEmptyState.style.display = 'none';
                    emptyState.style.display = 'none';
                    navContent.style.display = 'flex';
                }
            });
        }

        // ===================== 辅助函数 =====================
        /**
         * 检查空状态（无任何导航数据时显示）
         */
        function checkEmptyState() {
            if (navData.links.length === 0) {
                navContent.style.display = 'none';
                searchEmptyState.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
                navContent.style.display = 'flex';
            }
        }

        /**
         * 显示提示消息
         * @param {string} message 提示文本
         * @param {string} type 类型：success/error（默认success）
         */
        function showToast(message, type = 'success') {
            toast.textContent = message;
            toast.className = `toast toast-${type}`;
            toast.classList.add('show');

            // 2秒后隐藏
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // ===================== 页面初始化 =====================
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>